<style id="Main.css">
</style>
<script id="Main.js">
Application.$controller("GoogleOAuthController", ["$scope", function($scope) {
    "use strict";

    /* 
     * This function will be invoked when any of this prefab's property is changed
     * @key: property name
     * @newVal: new value of the property
     * @oldVal: old value of the property
     */
    function propertyChangeHandler(key, newVal, oldVal) {
            /*
		switch (key) {
			case "prop1":
				// do something with newVal for property 'prop1'
				break;
			case "prop2":
				// do something with newVal for property 'prop2'
				break;
		}
		*/
        }
        /* register the property change handler */
    $scope.propertyManager.add($scope.propertyManager.ACTIONS.CHANGE, propertyChangeHandler);


    $scope.OAuthHandlerServiceGetLoginURLonSuccess = function(variable, data) {
        window.location = data;
    };

    $scope.OAuthHandlerServiceGetAccessTokenonSuccess = function(variable, data) {
        if (data === "") {
            $scope.Variables.OAuthHandlerServiceGetLoginURL.update();
        } else {
            $scope.accesstoken = data;
        }
    };

}]);
</script>
<script id="Main.variables.json">
var _MainPage_Variables_ ={
  "OAuthHandlerServiceGetLoginURL" : {
    "isList" : false,
    "inFlightBehavior" : "executeLast",
    "onSuccess" : "Javascript",
    "serviceType" : "JavaService",
    "startUpdate" : false,
    "type" : "java.lang.String",
    "transformationRequired" : false,
    "maxResults" : 20,
    "operationId" : "GoogleOAuth_OAuthHandlerService_getLoginURL",
    "dataSet" : {
      "dataValue" : ""
    },
    "operation" : "getLoginURL",
    "category" : "wm.ServiceVariable",
    "autoUpdate" : false,
    "_id" : "wm-wm.ServiceVariable1431007930305",
    "dataBinding" : [ ],
    "saveInPhonegap" : false,
    "isDefault" : true,
    "operationType" : null,
    "name" : "OAuthHandlerServiceGetLoginURL",
    "designMaxResults" : 10,
    "owner" : "Page",
    "service" : "OAuthHandlerService"
  },
  "OAuthHandlerServiceGetCallbackURL" : {
    "isList" : false,
    "inFlightBehavior" : "executeLast",
    "serviceType" : "JavaService",
    "startUpdate" : true,
    "type" : "java.lang.String",
    "transformationRequired" : false,
    "maxResults" : 20,
    "operationId" : "GoogleOAuth_OAuthHandlerService_getCallbackURL",
    "dataSet" : {
      "dataValue" : ""
    },
    "operation" : "getCallbackURL",
    "category" : "wm.ServiceVariable",
    "autoUpdate" : false,
    "_id" : "wm-wm.ServiceVariable1431007930302",
    "dataBinding" : [ ],
    "saveInPhonegap" : false,
    "isDefault" : true,
    "operationType" : null,
    "name" : "OAuthHandlerServiceGetCallbackURL",
    "designMaxResults" : 10,
    "owner" : "Page",
    "service" : "OAuthHandlerService"
  },
  "OAuthHandlerServiceCallback" : {
    "isList" : false,
    "inFlightBehavior" : "executeLast",
    "serviceType" : "JavaService",
    "startUpdate" : false,
    "type" : ".void",
    "transformationRequired" : false,
    "maxResults" : 20,
    "operationId" : "GoogleOAuth_OAuthHandlerService_callback",
    "dataSet" : {
      "dataValue" : ""
    },
    "operation" : "callback",
    "category" : "wm.ServiceVariable",
    "autoUpdate" : false,
    "_id" : "wm-wm.ServiceVariable1431007930306",
    "dataBinding" : [ ],
    "saveInPhonegap" : false,
    "isDefault" : true,
    "operationType" : null,
    "name" : "OAuthHandlerServiceCallback",
    "designMaxResults" : 10,
    "owner" : "Page",
    "service" : "OAuthHandlerService"
  },
  "supportedLocale" : {
    "category" : "wm.Variable",
    "isList" : false,
    "_id" : "wm-wm.Variable1402640443182",
    "saveInPhonegap" : false,
    "dataBinding" : [ ],
    "name" : "supportedLocale",
    "owner" : "Page",
    "type" : "string",
    "dataSet" : {
      "en" : "English"
    }
  },
  "OAuthHandlerServiceGetAccessToken" : {
    "isList" : false,
    "inFlightBehavior" : "executeLast",
    "onSuccess" : "Javascript",
    "serviceType" : "JavaService",
    "startUpdate" : true,
    "type" : "java.lang.String",
    "transformationRequired" : false,
    "maxResults" : 20,
    "operationId" : "GoogleOAuth_OAuthHandlerService_getAccessToken",
    "dataSet" : {
      "dataValue" : ""
    },
    "operation" : "getAccessToken",
    "category" : "wm.ServiceVariable",
    "autoUpdate" : false,
    "_id" : "wm-wm.ServiceVariable1431007930305",
    "dataBinding" : [ ],
    "saveInPhonegap" : false,
    "isDefault" : true,
    "operationType" : null,
    "name" : "OAuthHandlerServiceGetAccessToken",
    "designMaxResults" : 10,
    "owner" : "Page",
    "service" : "OAuthHandlerService"
  }
}
</script>
<script id="Main.html" type="text/ng-template">
<wm-page data-ng-controller="GoogleOAuthController" name="page1">
    <wm-content name="view1">
        <wm-form title="OAuth Configuration" class="panel-default" name="form1">
            <wm-layoutgrid name="layoutgrid1">
                <wm-gridrow name="gridrow1">
                    <wm-gridcolumn name="gridcolumn1" columnwidth="2">
                        <wm-label name="label7" caption="Callback URL" fontweight="bold"></wm-label>
                    </wm-gridcolumn>
                    <wm-gridcolumn columnwidth="10" name="gridcolumn4">
                        <wm-label name="label8" caption="bind:Variables.OAuthHandlerServiceGetCallbackURL.dataSet.value"></wm-label>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow2">
                    <wm-gridcolumn name="gridcolumn2" columnwidth="2">
                        <wm-label name="label5" caption="Access Token" fontweight="bold"></wm-label>
                    </wm-gridcolumn>
                    <wm-gridcolumn columnwidth="10" name="gridcolumn5">
                        <wm-label name="label6" caption="bind:accesstoken"></wm-label>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow3">
                    <wm-gridcolumn columnwidth="2" name="gridcolumn5_1">
                        <wm-label name="label5_1" caption="Requires Header" fontweight="bold"></wm-label>
                    </wm-gridcolumn>
                    <wm-gridcolumn columnwidth="10" name="gridcolumn6">
                        <wm-label name="label6_1" caption="bind:'Authorization : Bearer&amp;nbsp'+ accesstoken"></wm-label>
                    </wm-gridcolumn>
                </wm-gridrow>
            </wm-layoutgrid>
        </wm-form>
    </wm-content>
</wm-page>
</script>